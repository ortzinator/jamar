import{U as N,k as I,C as S,r as j,c,d as t,f as a,u as o,M as B,V as D,w as r,F,a as f,b as d,h as $,t as u,g as b}from"./app.418331d3.js";import{r as L}from"./ExclamationIcon.da1e87e6.js";import{A as O}from"./NewLayout.0a46786c.js";import{_ as U,a as q,b as A,c as v}from"./Highlighter.f133e0bd.js";import{i as E,f as x}from"./util.e5fcb3c8.js";/* empty css            */import"./plugin-vue_export-helper.21dcd24c.js";const H={class:"py-5 font-bold"},M=t("h1",null,"Policies",-1),T={class:"flex justify-between mb-4"},z={class:"flex mr-4"},R={class:"flex bg-white rounded shadow cursor-default"},G=t("span",null,"Create",-1),J=t("span",{class:"hidden md:inline"}," Policy",-1),K={class:"overflow-x-auto bg-white rounded shadow"},Q=["textContent"],W={key:0,class:"flex items-center text-red-vivid-600"},X=b(" No policyholders found "),Y={key:1,class:"overflow-hidden text-ellipsis whitespace-nowrap"},Z={layout:O},ne=Object.assign(Z,{props:{policies:{type:Object,required:!0},filters:{type:Object,required:!0}},setup(n){var h,p;const m=n,s=N({search:(h=m.filters.search)!=null?h:"",trashed:(p=m.filters.trashed)!=null?p:""}),y=_.debounce(()=>{s.transform(i=>_.pickBy(i)).get("/policies",{only:["policies"],preserveState:!0,preserveScroll:!0})},400),w=I(()=>({search:s.search,trashed:s.trashed}));function g(){s.search="",s.trashed=null}S(w,()=>y());const k=j([{text:"Number",value:"number"},{text:"Policyholders",value:"contactNamesPreview"},{text:"Premium",value:"premium"},{text:"Date Issued",value:"created_at"},{text:"Ending",value:"period_end"}]);return(i,l)=>{const V=f("InertiaHead"),C=f("InertiaLink");return d(),c(F,null,[t("div",H,[a(V,{title:"Policies"}),M]),t("div",null,[t("div",T,[t("div",z,[t("div",R,[a(U,{modelValue:o(s).trashed,"onUpdate:modelValue":l[0]||(l[0]=e=>o(s).trashed=e)},null,8,["modelValue"]),B(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>o(s).search=e),type:"text",placeholder:"Search...",class:"w-full border-0 rounded-r"},null,512),[[D,o(s).search]])]),t("button",{class:"ml-3 text-sm text-cool-grey-500 hover:text-cool-grey-700 focus:text-light-blue-vivid-500",type:"button",onClick:g}," Reset ")]),a(C,{class:"btn btn-primary",href:i.route("policies.create")},{default:r(()=>[G,J]),_:1},8,["href"])]),t("div",K,[a(q,{columns:k.value,"data-source":n.policies.data,"route-name":"policies.edit"},{["column.number"]:r(({value:e})=>[a(v,{text:e,term:o(s).search},null,8,["text","term"])]),["column.period_end"]:r(({value:e})=>[t("span",{class:$({"text-red-vivid-500":o(E)(e)})},u(o(x)(e)),3)]),["column.created_at"]:r(({value:e})=>[b(u(o(x)(e)),1)]),["column.premium"]:r(({value:e})=>[t("div",{class:"w-full text-right",textContent:u(e.formatted)},null,8,Q)]),["column.contactNamesPreview"]:r(({value:e,row:P})=>[P.contacts.length===0?(d(),c("div",W,[a(o(L),{class:"w-5 h-5 mr-2"}),X])):(d(),c("div",Y,[a(v,{text:e,term:o(s).search},null,8,["text","term"])]))]),_:2},1032,["columns","data-source"])]),a(A,{links:n.policies.meta.links},null,8,["links"])])],64)}}});export{ne as default};
